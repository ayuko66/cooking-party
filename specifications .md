# 機能仕様書
以下、いったんの仕様たたき台だよ
MVPなので最小構成、最小コストでできるだけシンプルな構成とすること

# 概要
- 目的：複数人で材料を出し合い、生成AIが「架空の料理」と「イラスト」を作ってくれるお遊びブラウザゲーム
- 対象：招待された限られたメンバーのみ（URL共有ベース）
- 言語：日本語のみ対応

# プレイ条件
- 最大人数：1セッションあたり 5名まで
- 材料数：セッションあたり 最大20個まで
- 材料入力：1材料あたり 10文字以内のフリーテキスト
- 時間制限：材料入力フェーズは 10秒

# ゲームフロー（MVP案）
1. ホストがトップページで「部屋を作る」を押す
   - ランダムな部屋ID（例：4桁英数字）を発行
2. 参加者は同じURLを開き、部屋IDとニックネームを入力して参加
3. ホストが「スタート」ボタンを押すとカウントダウン（10秒）開始 (画面上に"材料は10秒で入力してね"と表示)
4. 各プレイヤー：
   - 材料を1つずつ入力 → 送信
   - 材料は合計20個を上限にサーバへ保存
5. カウントダウン終了後：
   - 画面上に "お料理生成中…" と表示
   - サーバが部屋内の材料一覧を集約
   - 生成AIへプロンプト送信
   - 返ってきた「料理名」「説明」「料理イラストURL」を部屋の結果として保存
6. 結果画面：
   - 料理名
   - 材料リスト
   - 一言説明
   - 料理イラスト
   - （オプション）「もう1回遊ぶ」ボタン

# 画面仕様（ざっくり）

## 1. トップ / 部屋作成・参加画面
- 要素
  - 「部屋を作る」ボタン
  - 「部屋ID入力」テキストボックス
  - 「ニックネーム」入力欄
  - 「部屋に入る」ボタン
- 挙動
  - 部屋作成時：部屋IDを表示し、参加者に共有できるようにする

## 2. 材料入力画面
- 表示
  - 部屋ID
  - 参加者一覧（ニックネーム）
  - カウントダウンタイマー（10秒）
  - 現在の材料数（0〜20）
  - 自分の材料入力欄（10文字制限）
- 挙動
  - 送信ボタン押下で材料をサーバに送る
  - 20個に達した場合、それ以上は弾く or ボタンを無効化

## 3. 結果画面
- 表示
  - 料理名（大きめフォント）
  - 料理イラスト画像
  - 説明テキスト
  - 使用された材料一覧
  - 「もう一度遊ぶ」ボタン（同じ部屋で新ラウンドを開始 / ページリロード）

# サーバ・API仕様（イメージ）

※ 実装方式は Next.js API Routes などを想定
- `POST /api/create-room`
  - 入力：なし
  - 出力：`{ roomId: string }`
- `POST /api/join-room`
  - 入力：`{ roomId, nickname }`
- `POST /api/add-ingredient`
  - 入力：`{ roomId, playerId, text }`
  - バリデーション：10文字以内・材料数20個まで
- `POST /api/start`
  - 入力：`{ roomId }`
  - 処理：部屋状態を countdown に変更し終了時刻を記録
- `GET /api/state?roomId=...`
  - 出力：部屋状態（phase, players, ingredients, countdown残り時間, result など）
- `POST /api/cook`
  - 入力：`{ roomId }`
  - 処理：材料一覧をもとに生成AIへ問い合わせ、結果を result として保存

クライアントは `GET /api/state` を1〜2秒おきにポーリング。

# AI生成仕様（初期案）

## テキスト（料理名＋説明）
- 入力：材料リスト（最大20個、日本語）
- 出力例：
  - 料理名：20文字以内
  - 説明：50〜100文字程度
- トーン：
  - パーティーゲーム向けのユーモラスなテキスト
  - 多少ふざけた・カオスな組み合わせも肯定的に扱う

## 画像（料理イラスト）
- 入力：
  - 料理名
  - 材料の要約
  - 「ポップなイラスト」「白背景」「単純な構図」などのスタイル指定（日本語）
- 出力：
  - 料理っぽいイラスト1枚のURL or base64

# 制約・非機能要件（MVP）
- 利用ユーザー：身内のみ（URL共有ベース）
- セキュリティ：
  - APIキーはサーバ側にのみ保持
  - 認証やアカウント管理は行わない（MVPでは省略）
- パフォーマンス：
  - 同時部屋数は少数（数部屋程度）を想定
- ログ：
  - デバッグ用に部屋ID・材料・生成結果を簡易ログとして保持（期間限定）
- MVPは最小構成、最小コストでできるだけシンプルな構成とすること